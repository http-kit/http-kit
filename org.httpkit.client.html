<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>org.httpkit.client documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Http-kit</span> <span class="project-version">2.8.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>org</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>httpkit</span></div></div></li><li class="depth-3 branch current"><a href="org.httpkit.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="org.httpkit.encode.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>encode</span></div></a></li><li class="depth-3 branch"><a href="org.httpkit.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3 branch"><a href="org.httpkit.sni-client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sni-client</span></div></a></li><li class="depth-3 branch"><a href="org.httpkit.timer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>timer</span></div></a></li><li class="depth-3"><a href="org.httpkit.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="org.httpkit.client.html#var-*default-client*"><div class="inner"><span>*default-client*</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-acl"><div class="inner"><span>acl</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-copy"><div class="inner"><span>copy</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-default-client"><div class="inner"><span>default-client</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-default-worker_"><div class="inner"><span>default-worker_</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-delete"><div class="inner"><span>delete</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-get"><div class="inner"><span>get</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-head"><div class="inner"><span>head</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-legacy-client"><div class="inner"><span>legacy-client</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-lock"><div class="inner"><span>lock</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-make-client"><div class="inner"><span>make-client</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-make-ssl-engine"><div class="inner"><span>make-ssl-engine</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-max-body-filter"><div class="inner"><span>max-body-filter</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-move"><div class="inner"><span>move</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-new-worker"><div class="inner"><span>new-worker</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-options"><div class="inner"><span>options</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-patch"><div class="inner"><span>patch</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-post"><div class="inner"><span>post</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-propfind"><div class="inner"><span>propfind</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-proppatch"><div class="inner"><span>proppatch</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-put"><div class="inner"><span>put</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-query-string"><div class="inner"><span>query-string</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-report"><div class="inner"><span>report</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-request"><div class="inner"><span>request</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-unlock"><div class="inner"><span>unlock</span></div></a></li><li class="depth-1"><a href="org.httpkit.client.html#var-url-encode"><div class="inner"><span>url-encode</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">org.httpkit.client</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-*default-client*"><h3>*default-client*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Specifies the default `HttpClient` used by the `request` function.
Value may be a delay. See also `make-client`.</pre></div></div><div class="public anchor" id="var-acl"><h3>acl</h3><div class="usage"><code>(acl url &amp; [opts callback])</code><code>(acl url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP ACL request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-copy"><h3>copy</h3><div class="usage"><code>(copy url &amp; [opts callback])</code><code>(copy url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP COPY request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-default-client"><h3>default-client</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-default-worker_"><h3>default-worker_</h3><div class="usage"></div><div class="doc"><pre class="plaintext">(delay (new-worker {})), used to handle client callbacks.
See `new-worker` for details.</pre></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete url &amp; [opts callback])</code><code>(delete url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP DELETE request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-get"><h3>get</h3><div class="usage"><code>(get url &amp; [opts callback])</code><code>(get url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP GET request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-head"><h3>head</h3><div class="usage"><code>(head url &amp; [opts callback])</code><code>(head url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP HEAD request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-legacy-client"><h3>legacy-client</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-lock"><h3>lock</h3><div class="usage"><code>(lock url &amp; [opts callback])</code><code>(lock url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP LOCK request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-make-client"><h3>make-client</h3><div class="usage"><code>(make-client {:keys [max-connections address-finder ssl-configurer error-logger event-logger event-names bind-address channel-factory]})</code></div><div class="doc"><pre class="plaintext">Returns an HttpClient with specified options:
:max-connections    ; Max connection count, default is unlimited (-1)
:address-finder     ; (fn [java.net.URI]) -&gt; `java.net.SocketAddress`
:channel-factory    ; (fn [java.net.SocketAddress]) -&gt; `java.nio.channels.SocketChannel`
:ssl-configurer     ; (fn [javax.net.ssl.SSLEngine java.net.URI])
:error-logger       ; (fn [text ex])
:event-logger       ; (fn [event-name])
:event-names        ; {&lt;http-kit-event-name&gt; &lt;loggable-event-name&gt;}
:bind-address       ; when present will pass local address to SocketChannel.bind()</pre></div></div><div class="public anchor" id="var-make-ssl-engine"><h3>make-ssl-engine</h3><div class="usage"><code>(make-ssl-engine)</code><code>(make-ssl-engine ctx)</code></div><div class="doc"><pre class="plaintext">Returns an SSLEngine using default or given SSLContext.
</pre></div></div><div class="public anchor" id="var-max-body-filter"><h3>max-body-filter</h3><div class="usage"><code>(max-body-filter size)</code></div><div class="doc"><pre class="plaintext">reject if response's body exceeds size in bytes
</pre></div></div><div class="public anchor" id="var-move"><h3>move</h3><div class="usage"><code>(move url &amp; [opts callback])</code><code>(move url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP MOVE request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-new-worker"><h3>new-worker</h3><div class="usage"><code>(new-worker {:keys [queue-size n-min-threads n-max-threads prefix allow-virtual?], :as opts})</code></div><div class="doc"><pre class="plaintext">Returns {:keys [n-cores type pool ...]} where `:pool` is a new
`java.util.concurrent.ExecutorService` for handling client callbacks.

When on JVM 21+, uses `newVirtualThreadPerTaskExecutor` by default.
Otherwise creates a standard `ThreadPoolExecutor` with default min and max
thread count auto-selected based on currently available processor count.</pre></div></div><div class="public anchor" id="var-options"><h3>options</h3><div class="usage"><code>(options url &amp; [opts callback])</code><code>(options url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP OPTIONS request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-patch"><h3>patch</h3><div class="usage"><code>(patch url &amp; [opts callback])</code><code>(patch url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP PATCH request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-post"><h3>post</h3><div class="usage"><code>(post url &amp; [opts callback])</code><code>(post url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP POST request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-propfind"><h3>propfind</h3><div class="usage"><code>(propfind url &amp; [opts callback])</code><code>(propfind url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP PROPFIND request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-proppatch"><h3>proppatch</h3><div class="usage"><code>(proppatch url &amp; [opts callback])</code><code>(proppatch url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP PROPPATCH request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-put"><h3>put</h3><div class="usage"><code>(put url &amp; [opts callback])</code><code>(put url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP PUT request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-query-string"><h3>query-string</h3><div class="usage"><code>(query-string m)</code><code>(query-string m style)</code></div><div class="doc"><pre class="plaintext">Returns URL-encoded query string for given params map.
</pre></div></div><div class="public anchor" id="var-report"><h3>report</h3><div class="usage"><code>(report url &amp; [opts callback])</code><code>(report url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP REPORT request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-request"><h3>request</h3><div class="usage"><code>(request {:keys [client timeout connect-timeout idle-timeout filter worker-pool keepalive as follow-redirects max-redirects response trace-redirects allow-unsafe-redirect-methods proxy-host proxy-port proxy-url tunnel? deadlock-guard? auto-compression? insecure? nested-param-style], :as opts, :or {auto-compression? true, idle-timeout 60000, proxy-port -1, tunnel? false, response (promise), follow-redirects true, proxy-url nil, as :auto, deadlock-guard? true, proxy-host nil, max-redirects 10, keepalive 120000, filter IFilter/ACCEPT_ALL, connect-timeout 60000}} &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP request and returns a promise object to which the value
of `(callback {:opts _ :status _ :headers _ :body _})` or
   `(callback {:opts _ :error _})` will be delivered.
The latter will be delivered on client errors only, not on http errors which will be
contained in the :status of the first.

;; Asynchronous GET request (returns a promise)
(request {:url "<a href="http://www.cnn.com">http://www.cnn.com</a>"})

;; Asynchronous GET request with callback
(request {:url "<a href="http://www.cnn.com">http://www.cnn.com</a>" :method :get}
  (fn [{:keys [opts status body headers error] :as resp}]
    (if error
      (println "Error on" opts)
      (println "Success on" opts))))

;; Synchronous requests
@(request ...) or (deref (request ...) timeout-ms timeout-val)

;; Issue 2 concurrent requests, then wait for results
(let [resp1 (request ...)
      resp2 (request ...)]
  (println "resp1's status: " (:status @resp1))
  (println "resp2's status: " (:status @resp2)))

Returned body type is controlled by `:as` option:

  Without automatic unzipping:
    `:none`           - org.httpkit.DynamicBytes
    `:raw-byte-array` - bytes[]

  With automatic unzipping:
    `:byte-array`     - bytes[]
    `:stream`         - ByteInputStream
    `:text`           - String (charset based on Content-Type header)
    `:auto`           - As `:text` or `:stream` (based on Content-Type header)

Request options:
  :url :method :headers :timeout :connect-timeout :idle-timeout :query-params
  :as :form-params :client :body :basic-auth :user-agent :filter :worker-pool

  :nested-param-style - ∈ #{:comma-separated :array :indexed nil} (default nil)</pre></div></div><div class="public anchor" id="var-unlock"><h3>unlock</h3><div class="usage"><code>(unlock url &amp; [opts callback])</code><code>(unlock url &amp; [callback])</code></div><div class="doc"><pre class="plaintext">Issues an async HTTP UNLOCK request. See `request` for details.
</pre></div></div><div class="public anchor" id="var-url-encode"><h3>url-encode</h3><div class="usage"><code>(url-encode s)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>